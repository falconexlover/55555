# Гостиница "Лесной дворик"

Официальный веб-сайт гостиницы "Лесной дворик" с информацией о номерах, услугах и онлайн-бронированием.

## Оптимизированная структура проекта

Проект оптимизирован для деплоя на Netlify с поддержкой серверных функций:

* `/api/` - основная директория с файлами проекта
  * `/api/public/` - статические файлы (HTML, CSS, JS, изображения)
  * `/api/functions/` - функции Netlify (Backend API)
  * `/api/assets/` - изображения и ресурсы
  * `/api/css/` - файлы стилей
  * `/api/js/` - JavaScript-файлы
  * `/api/public/pages/` - страницы сайта

## Основные функции сайта

* Главная страница с информацией о гостинице
* Страницы с описанием номеров и услуг
* Система онлайн-бронирования номеров
* Административная панель для управления бронированиями
* Адаптивный дизайн для всех устройств

## Инструкции по деплою

### Простой деплой на Netlify

1. Форкните репозиторий или клонируйте его на свой GitHub-аккаунт
2. Войдите в [Netlify Dashboard](https://app.netlify.com/)
3. Нажмите "New site from Git" и выберите GitHub
4. Выберите репозиторий с проектом
5. Настройте параметры сборки:
   * Base directory: `.` (оставьте пустым)
   * Build command: `npm run build`
   * Publish directory: `api/public`
6. Раскройте "Advanced build settings" и добавьте необходимые переменные окружения:
   * `MONGODB_URI` - URI для подключения к MongoDB
   * `JWT_SECRET` - секретный ключ для JWT токенов
7. Нажмите "Deploy site"

### Настройка MongoDB

Проект использует MongoDB для хранения данных о бронированиях и номерах. Вы можете использовать:

* [MongoDB Atlas](https://www.mongodb.com/cloud/atlas) - облачное решение с бесплатным тарифом
* Любой другой хостинг MongoDB

Структура базы данных автоматически создается при первом запуске приложения, но вы также можете импортировать тестовые данные из файла `db_structure.sql`.

### Локальная разработка

#### Предварительные требования:

* Node.js версии 14.x или выше
* npm или yarn
* Учетная запись MongoDB (локальная или облачная)

#### Установка и запуск:

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/lesnoy-dvorik.git
   cd lesnoy-dvorik
   ```

2. Установите зависимости:
   ```bash
   npm install
   ```

3. Создайте файл `.env` в корневой директории на основе `.env.example`:
   ```
   MONGODB_URI=mongodb+srv://your-username:your-password@your-cluster.mongodb.net/lesnoy-dvorik?retryWrites=true&w=majority
   JWT_SECRET=your-secret-key
   ```

4. Запустите сервер для разработки:
   ```bash
   npm run start
   ```

5. Откройте браузер и перейдите по адресу http://localhost:8888

### Структура API

Проект использует Netlify Functions для обработки API-запросов:

* `/api/functions/admin.js` - функции для административной панели
* `/api/functions/bookings.js` - функции для обработки бронирований

Функции доступны по следующим URL:
* `/.netlify/functions/admin` - API для административной панели
* `/.netlify/functions/bookings` - API для бронирований

## Административная панель

Доступ к административной панели: `/admin/`

Данные для входа по умолчанию:
* Логин: `admin`
* Пароль: `password123`

**ВАЖНО:** После первого входа рекомендуется изменить пароль.

## Мобильная версия

Сайт полностью адаптирован для мобильных устройств. Для тестирования мобильной версии:

1. Откройте инструменты разработчика в браузере (F12)
2. Включите режим эмуляции мобильного устройства (Toggle device toolbar)
3. Выберите устройство из списка или установите пользовательское разрешение

## Оптимизация производительности

* Используется ленивая загрузка изображений (`loading="lazy"`)
* Оптимизированы CSS и JavaScript файлы
* Настроен кэш статических ресурсов
* Серверные функции оптимизированы для быстрого отклика

## Решение проблем

### Функции Netlify не работают

1. Убедитесь, что директория `api/functions` правильно указана в `netlify.toml`
2. Проверьте, что все зависимости указаны в `package.json`
3. Убедитесь, что переменные окружения правильно настроены в Netlify

### Проблемы с MongoDB

1. Проверьте строку подключения к MongoDB в переменных окружения
2. Убедитесь, что IP-адрес сервера Netlify добавлен в список разрешенных в MongoDB Atlas
3. Проверьте логи Netlify Functions для выявления ошибок

## Техническая поддержка

По вопросам технической поддержки обращайтесь:
* Создайте Issue в GitHub репозитории
* Напишите на email: info@lesnoy-dvorik.ru

## Лицензия

MIT License

## Оптимизированная структура проекта

Проект оптимизирован для деплоя на платформе Vercel с поддержкой PHP:

* `/api/` - основная директория с файлами проекта
  * `/api/admin/` - административная панель
  * `/api/assets/` - изображения и ресурсы
  * `/api/css/` - файлы стилей
  * `/api/includes/` - PHP-библиотеки
  * `/api/js/` - JavaScript-файлы
  * `/api/pages/` - страницы сайта
  * `/api/php/` - PHP-скрипты для обработки форм
  * `/api/public/` - публично доступные файлы
* `vercel.json` - конфигурационный файл для Vercel
* `.env.example` - пример конфигурации переменных окружения
* `vercel-deploy.ps1` - PowerShell скрипт для деплоя на Vercel (Windows)
* `vercel-deploy.sh` - Bash скрипт для деплоя на Vercel (Linux/Mac)
* `update-from-github.ps1` - PowerShell скрипт для обновления проекта с GitHub
* `backup-project.ps1` - PowerShell скрипт для резервного копирования проекта
* `cleanup.ps1` - PowerShell скрипт для очистки временных файлов
* `check-site.ps1` - PowerShell скрипт для проверки работоспособности сайта
* `generate-report.ps1` - PowerShell скрипт для генерации отчета о состоянии проекта
* `MAINTENANCE.md` - инструкции по обслуживанию проекта

## Быстрый деплой на Vercel

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/git/external?repository-url=https%3A%2F%2Fgithub.com%2Ffalconexlover%2F55555)

## Инструкции по деплою

### Через Vercel Dashboard

1. Форкните репозиторий или клонируйте его на свой GitHub-аккаунт
2. Войдите в свой [Vercel Dashboard](https://vercel.com/dashboard)
3. Нажмите "New Project" и импортируйте проект из GitHub
4. Выберите репозиторий с проектом
5. Настройки проекта:
   * Framework Preset: `Other`
   * Root Directory: `./` (оставьте значение по умолчанию)
   * Build Command: _оставьте пустым_
   * Output Directory: _оставьте пустым_
6. Раскройте "Environment Variables" и добавьте:
   * `DB_HOST` - хост базы данных MySQL
   * `DB_NAME` - имя базы данных
   * `DB_USER` - имя пользователя для БД
   * `DB_PASSWORD` - пароль для БД
   * `YANDEX_MAPS_API_KEY` - API-ключ Яндекс.Карт (опционально)
7. Нажмите "Deploy"

### Через Vercel CLI

1. Установите Vercel CLI: `npm i -g vercel`
2. Войдите в свой аккаунт: `vercel login`
3. Клонируйте репозиторий: `git clone https://github.com/falconexlover/55555.git`
4. Перейдите в директорию проекта: `cd 55555`
5. Создайте файл `.env` на основе `.env.example`
6. Выполните команду: `vercel`
7. Следуйте инструкциям в терминале

### Использование скриптов для деплоя (Windows)

1. Откройте PowerShell в директории проекта
2. Запустите скрипт деплоя: `.\vercel-deploy.ps1`
3. Следуйте инструкциям в терминале

### Использование скриптов для деплоя (Linux/Mac)

1. Откройте терминал в директории проекта
2. Сделайте скрипт исполняемым: `chmod +x vercel-deploy.sh`
3. Запустите скрипт деплоя: `./vercel-deploy.sh`
4. Следуйте инструкциям в терминале

## Обновление проекта

### Обновление с GitHub (Windows)

1. Откройте PowerShell в директории проекта
2. Запустите скрипт обновления: `.\update-from-github.ps1`
3. Скрипт автоматически получит последние изменения с GitHub и обновит зависимости

## Резервное копирование

### Создание резервной копии (Windows)

1. Откройте PowerShell в директории проекта
2. Запустите скрипт резервного копирования: `.\backup-project.ps1`
3. Резервная копия будет создана в директории `backups` с именем файла, содержащим текущую дату и время

## Очистка временных файлов

### Очистка проекта (Windows)

1. Откройте PowerShell в директории проекта
2. Запустите скрипт очистки: `.\cleanup.ps1`
3. Скрипт автоматически очистит временные файлы и директории, а также создаст необходимые директории, если они отсутствуют

## Проверка работоспособности сайта

### Проверка сайта (Windows)

1. Откройте PowerShell в директории проекта
2. Запустите скрипт проверки: `.\check-site.ps1`
3. Введите URL вашего сайта (например, https://lesnoy-dvorik.vercel.app)
4. Скрипт проверит доступность сайта, основных страниц, загрузку изображений и время загрузки

## Генерация отчета о состоянии проекта

### Создание отчета (Windows)

1. Откройте PowerShell в директории проекта
2. Запустите скрипт генерации отчета: `.\generate-report.ps1`
3. Отчет будет создан в директории `reports` с именем файла, содержащим текущую дату и время
4. По завершении вам будет предложено открыть отчет в браузере

## Инструкции по обслуживанию

Подробные инструкции по обслуживанию проекта доступны в файле [MAINTENANCE.md](MAINTENANCE.md).

## База данных

Для работы сайта требуется MySQL база данных. Вы можете использовать:

* [PlanetScale](https://planetscale.com/) (есть бесплатный план)
* [Amazon RDS](https://aws.amazon.com/rds/)
* [DigitalOcean Managed Databases](https://www.digitalocean.com/products/managed-databases/)

Структура базы данных содержится в файле `db_structure.sql`. Импортируйте её в вашу базу данных перед деплоем.

## Административная панель

Доступ к административной панели: `/admin/`

Данные для входа по умолчанию:
* Логин: `admin`
* Пароль: `password123`

**ВАЖНО:** Сразу после первого входа измените логин и пароль в файле `/api/admin/index.php`.

## Локальная разработка

Для локальной разработки вы можете использовать:

```bash
# Установка зависимостей
npm install

# Запуск локального сервера
npm run start
```

Или любой сервер с поддержкой PHP, например XAMPP, OpenServer или WAMP.

## Производительность и оптимизация

* Файл `vercel.json` содержит настройки кэширования для статических файлов
* Изображения оптимизированы с использованием атрибута `loading="lazy"`
* Для лучшей производительности используйте Vercel Edge Network

## Вопросы и поддержка

В случае возникновения вопросов по настройке или функционалу, обращайтесь:
* Создайте Issue в этом репозитории
* Напишите на email: admin@lesnoy-dvorik.ru

## Структура проекта

- `index.html` - Главная страница сайта
- `css/` - Стили CSS
- `js/` - JavaScript файлы
- `php/` - PHP скрипты
- `includes/` - Включаемые файлы
- `pages/` - Страницы сайта
- `admin/` - Административная панель
- `assets/` - Ресурсы (изображения, шрифты и т.д.)
- `data/` - Данные
- `docs/` - Документация
- `errors/` - Страницы ошибок

## Установка

1. Клонировать репозиторий
2. Настроить веб-сервер (Apache, Nginx)
3. Настроить базу данных (если требуется)
4. Открыть сайт в браузере

## Контакты

Для получения дополнительной информации свяжитесь с администратором проекта. 

## Техническая поддержка

По всем вопросам обращайтесь к администратору сайта. 