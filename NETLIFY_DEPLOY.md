# Развертывание "Лесной дворик" на Netlify

Это руководство поможет вам развернуть сайт гостиницы "Лесной дворик" на платформе [Netlify](https://www.netlify.com/).

## Предварительные требования

1. Аккаунт на [GitHub](https://github.com/)
2. Аккаунт на [Netlify](https://www.netlify.com/) (бесплатный тариф подходит)
3. База данных MongoDB (рекомендуется [MongoDB Atlas](https://www.mongodb.com/cloud/atlas))

## Пошаговые инструкции

### Шаг 1: Подготовка репозитория

1. Загрузите проект на GitHub:
   - Создайте новый репозиторий на GitHub
   - Инициализируйте Git в локальной директории проекта:
     ```bash
     git init
     git add .
     git commit -m "Первоначальная загрузка"
     git remote add origin https://github.com/ваш-логин/ваш-репозиторий.git
     git push -u origin main
     ```

### Шаг 2: Подключение к Netlify

1. Зайдите в свой аккаунт на [Netlify](https://app.netlify.com/)
2. Нажмите кнопку "New site from Git"
3. Выберите GitHub в качестве провайдера Git
4. Авторизуйтесь через GitHub и предоставьте необходимые разрешения
5. Выберите созданный вами репозиторий из списка

### Шаг 3: Настройка параметров сборки

Настройте следующие параметры деплоя:

**Basic build settings:**
- **Base directory**: оставьте пустым (или укажите `./` если требуется)
- **Build command**: `npm run build`
- **Publish directory**: `api/public`

### Шаг 4: Настройка переменных окружения

1. Раскройте раздел "Advanced build settings"
2. Добавьте следующие переменные окружения:

| Key | Value | Description |
|-----|-------|-------------|
| `MONGODB_URI` | `mongodb+srv://...` | URI для подключения к вашей MongoDB |
| `JWT_SECRET` | `ваш-секретный-ключ` | Секретный ключ для JWT авторизации |
| `NODE_ENV` | `production` | Среда выполнения |

### Шаг 5: Запуск деплоя

1. Нажмите кнопку "Deploy site"
2. Дождитесь завершения процесса сборки и деплоя (обычно занимает 1-2 минуты)
3. После успешного деплоя Netlify предоставит URL вашего сайта (например, `https://your-site-name.netlify.app`)

### Шаг 6: Настройка домена (опционально)

Если у вас есть собственный домен:

1. В дашборде Netlify перейдите в раздел "Domain settings"
2. Нажмите "Add custom domain"
3. Следуйте инструкциям для настройки DNS

## Проверка функциональности

После деплоя проверьте следующую функциональность:

1. **Доступность главной страницы**: Откройте URL вашего сайта
2. **Навигация**: Проверьте переходы между разделами сайта
3. **Форма бронирования**: Попробуйте заполнить и отправить форму
4. **Административная панель**: Перейдите на `/admin` и попробуйте войти с учетными данными

## Диагностика проблем

### Проблемы с функциями Netlify

Если серверные функции не работают:

1. Проверьте вкладку "Functions" в дашборде Netlify
2. Убедитесь, что файлы функций находятся в директории `api/functions/`
3. Проверьте логи в разделе "Deploys" > выберите последний деплой > "Functions"

### Отсутствие доступа к базе данных

1. Убедитесь, что URL MongoDB корректный
2. Проверьте, что IP серверов Netlify добавлен в список разрешенных IP в MongoDB Atlas
3. Проверьте логи функций для выявления ошибок подключения

## Обновление сайта

Для обновления сайта достаточно отправить изменения в ваш GitHub репозиторий:

```bash
git add .
git commit -m "Описание изменений"
git push
```

Netlify автоматически запустит процесс пересборки и деплоя.

## Полезные ресурсы

- [Документация Netlify](https://docs.netlify.com/)
- [Документация по Netlify Functions](https://docs.netlify.com/functions/overview/)
- [Документация MongoDB Atlas](https://docs.atlas.mongodb.com/)

## Техническая поддержка

Если у вас возникли проблемы с деплоем, обратитесь:

- Email: info@lesnoy-dvorik.ru
- GitHub: создайте Issue в репозитории проекта 